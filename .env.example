# Grahvani Backend - Environment Variables
# This single file is used by ALL services during local development
# For deployment, these are set in your hosting platform (DigitalOcean, Supabase, etc.)

# ============ SUPABASE API ============
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
ASTRO_ENGINE_URL=http://localhost:3014
ASTRO_ENGINE_PORT=3014

# Geocoding API (OpenCage) - Required for birth place coordinates
GEOCODING_API_KEY=your-geocoding-key

# ============ DATABASE (PostgreSQL 16, self-hosted on KVM4 via Coolify) ============
# Global connection (used by Prisma CLI for migrations)
DATABASE_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani
DIRECT_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani

# Service-specific URLs with schema isolation (used at runtime by DatabaseManager)
AUTH_DATABASE_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_auth,public
AUTH_DIRECT_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_auth,public
USER_DATABASE_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_users,public
USER_DIRECT_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_users,public
CLIENT_DATABASE_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_clients,public
CLIENT_DIRECT_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_clients,public
MEDIA_DATABASE_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_media,public
MEDIA_DIRECT_URL=postgres://grahvani:PASSWORD@localhost:5432/grahvani?search_path=app_media,public

# ============ REDIS (Local) ============
REDIS_URL=redis://localhost:6379

# ============ MEILISEARCH (Local) ============
MEILISEARCH_URL=http://localhost:7700
MEILISEARCH_KEY=grahvani_search_key

# ============ AUTH SERVICE ============
JWT_SECRET=your-jwt-secret-min-32-chars
JWT_REFRESH_SECRET=your-refresh-secret-min-32-chars
BCRYPT_ROUNDS=12

# ============ INTERNAL SERVICE COMMUNICATION ============
INTERNAL_SERVICE_KEY=your-internal-key-for-service-to-service

# ============ PAYMENT SERVICE ============
RAZORPAY_KEY_ID=rzp_test_xxx
RAZORPAY_KEY_SECRET=xxx
PHONEPE_MERCHANT_ID=xxx
PHONEPE_SALT_KEY=xxx

# ============ AI SERVICE ============
GEMINI_API_KEY=xxx

# ============ NOTIFICATION SERVICE ============
RESEND_API_KEY=re_xxx
TWILIO_ACCOUNT_SID=xxx
TWILIO_AUTH_TOKEN=xxx

# ============ API GATEWAY ============
GATEWAY_PORT=8080
AUTH_SERVICE_URL=http://localhost:3001
USER_SERVICE_URL=http://localhost:3002
CLIENT_SERVICE_URL=http://localhost:3008
MEDIA_SERVICE_URL=http://localhost:3007

# ============ MEDIA SERVICE — STORAGE ============
# Step 1: Local disk (current)
STORAGE_ADAPTER=local
STORAGE_LOCAL_PATH=./uploads

# Step 2: AWS S3 (uncomment when upgrading)
# STORAGE_ADAPTER=s3
# S3_ENDPOINT=https://s3.ap-south-1.amazonaws.com
# S3_BUCKET=grahvani-media
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_REGION=ap-south-1
# S3_PUBLIC_URL=https://grahvani-media.s3.ap-south-1.amazonaws.com

# Step 3: Cloudflare R2 ($0 download fees — uncomment when upgrading)
# STORAGE_ADAPTER=s3
# S3_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
# S3_BUCKET=grahvani-media
# S3_ACCESS_KEY=your-r2-access-key
# S3_SECRET_KEY=your-r2-secret-key
# S3_REGION=auto
# S3_PUBLIC_URL=https://media.grahvani.in
# ============ GENERAL ============
NODE_ENV=development
